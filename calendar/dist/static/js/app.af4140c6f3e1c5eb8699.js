webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("xd7I"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("p",{on:{click:t.setDate}},[t._v("点击设置日期（默认今天）")]),t._v(" "),i("p",[t._v("选中的时间"+t._s(t.date))]),t._v(" "),i("p",{on:{click:t.setDate2}},[t._v("设定指定的日期（2018-3-31）")]),t._v(" "),i("p",[t._v("选中的时间"+t._s(t.date2))])])},staticRenderFns:[]},a=i("C7Lr")({name:"App",data:function(){return{date:"",date2:"2018-3-31"}},methods:{setDate:function(){var t=this;this.$picker.show({type:"datePicker",onOk:function(e){t.date=e}})},setDate2:function(){var t=this;this.$picker.show({type:"datePicker",date:this.date2,endTime:"2025-9-8",startTime:"2010-06-19",onOk:function(e){t.date2=e}})}}},s,!1,null,null,null).exports,r=i("aA9S"),h=i.n(r),o=(i("amPA"),i("+Up5")),c=i.n(o);function l(t,e){var i,n,s;try{i=t.toString().split(".")[1].length}catch(t){i=0}try{n=e.toString().split(".")[1].length}catch(t){n=0}return(m(t,s=Math.pow(10,Math.max(i,n)))-m(e,s))/s}function m(t,e){var i=0,n=t.toString(),s=e.toString();try{i+=n.split(".")[1].length}catch(t){}try{i+=s.split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(s.replace(".",""))/Math.pow(10,i)}function d(t,e){var i=0,n=0;try{i=t.toString().split(".")[1].length}catch(t){}try{n=e.toString().split(".")[1].length}catch(t){}return m(Number(t.toString().replace(".",""))/Number(e.toString().replace(".","")),Math.pow(10,n-i))}function p(t,e){return l(t,m(parseInt(d(t,e)),e))}function u(t){var e=t.toString().split("-");return e[1]=1===e[1].length&&e[1]<10?"0"+e[1]:e[1],e[2]=1===e[2].length&&e[2]<10?"0"+e[2]:e[2],e[0]+"-"+e[1]+"-"+e[2]}var v={data:function(){return{startY:"",endY:"",lastPoint:[],value:"",dY:0,itemKey:0,changeY:"",domStyle:{transform:"translate3d(0,0,0)"}}},computed:{itemHeight:function(){return(+window.getComputedStyle(document.querySelector(".m-scroller-item")).height.replace("px","")).toFixed(2)},itemLen:function(){return this.d.length}},mounted:function(){this.val?this.moveTo(this.val):(this.dY=m(this.itemHeight,4),this.domStyle=this.style={transform:"translate3d(0px, "+this.dY+"px, 0px)"})},methods:{scroll:function(t,e){var i=p(t,this.itemHeight)>d(this.itemHeight,2)?this.itemHeight:0;(t=function(t,e){var i,n,s;try{i=t.toString().split(".")[1].length}catch(t){i=0}try{n=e.toString().split(".")[1].length}catch(t){n=0}return(m(t,s=Math.pow(10,Math.max(i,n)))+m(e,s))/s}(l(t,p(t,this.itemHeight)),i))>m(this.itemHeight,4)&&(t=m(this.itemHeight,4));var n=m(5-this.itemLen,this.itemHeight);t<n&&(t=n),this.dY=t,this.itemKey=d(l(m(this.itemHeight,4),t),this.itemHeight),this.domStyle=this.style={transform:"translate3d(0px, "+t+"px, 0px)",transition:"all "+e+"s cubic-bezier(0.1, 0.85, 0.25, 1) 0s"},this.change(this.d[this.itemKey],this.itemKey,this.selType)},start:function(t){this.startY=t.touches[0].pageY,this.domStyle=this.style={transform:"translate3d(0px, "+this.dY+"px, 0px)",transition:"none"}},end:function(t){this.endY=t.changedTouches[0].pageY;var e=parseInt(Math.sqrt(Math.abs(this.endY-this.startY)))/10;this.scroll(this.dY+this.endY-this.startY,e)},move:function(t){t.preventDefault();var e=t.touches[0].pageY-this.startY;this.domStyle={transform:"translate3d(0px, "+(e+this.dY)+"px, 0px)"}},moveTo:function(t){var e=this;"month"==this.selType||"day"==this.selType?(this.itemKey=0,this.d.map(function(i,n){i.match(/\d*/g)[0]==t&&(e.itemKey=n)})):"year"==this.selType?(this.itemKey=0,this.d.map(function(i,n){i.match(/\d*/g)[0]==t&&(e.itemKey=n)})):(this.itemKey=0,this.d.map(function(i,n){i==t&&(e.itemKey=n)})),this.dY=m(4-this.itemKey,this.itemHeight),this.scroll(this.dY,0)}},watch:{d:function(){var t=this;this.itemKey+1>this.d.length&&(this.itemKey=this.d.length,this.dY=m(4-this.itemKey,this.itemHeight),this.scroll(this.dY,.4)),"month"!=this.selType&&"day"!=this.selType||(this.d.map(function(e,i){e.match(/\d*/g)[0]==t.val&&(t.itemKey=i)}),this.dY=m(4-this.itemKey,this.itemHeight),this.scroll(this.dY,.4))}},props:{change:{},val:{},selType:{},d:{default:function(){return[]}}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-picker-item"},[i("div",{staticClass:"m-scroller-indicator"}),t._v(" "),i("div",{staticClass:"m-scroller-mask",on:{touchstart:t.start,touchend:t.end,touchmove:t.move}}),t._v(" "),i("div",{staticClass:"m-scroller-item-box",style:t.domStyle},t._l(t.d,function(e,n){return i("div",{key:n,staticClass:"m-scroller-item"},[t._v(t._s(e))])}),0)])},staticRenderFns:[]},y={name:"HelloWorld",data:function(){return{show:!1,type:"picker",dataList:[],year:1,month:1,day:1,endTime:"",startTime:"",onOk:function(t){console.log(t)},onCancel:function(){}}},computed:{isR:function(){return this.year%4==0},startTimeArr:function(){return this.startTime?this.startTime.split("-"):[]},endTimeArr:function(){return this.endTime?this.endTime.split("-"):[]}},methods:{sel:function(){this.show=!1;var t=u(this.year+"-"+this.month+"-"+this.day);this.onOk(t)},itemSel:function(){},setMonth:function(){var t=2==this.month,e=[1,3,5,7,8,10,12].join().indexOf(parseInt(this.month)),i="",n=[];i=t?this.isR?[1,29]:[1,28]:e<0?[1,30]:[1,31];var s=[],a=[1,12];this.endTimeArr&&this.year==+this.endTimeArr[0]&&(a[1]=+this.endTimeArr[1],this.month==+this.endTimeArr[1]&&(i[1]=+this.endTimeArr[2])),this.startTimeArr&&this.year==+this.startTimeArr[0]&&(a[0]=+this.startTimeArr[1],this.month==+this.startTimeArr[1]&&(i[0]=+this.startTimeArr[2]));for(var r=i[0];r<=i[1];r++)n.push(r+"日");for(var h=a[0];h<=a[1];h++)s.push(h+"月");this.dataList[2]=n,this.dataList[1]=s},change:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"day"==i?this.day=t.match(/\d*/g)[0]:"year"==i?(this.year=t.match(/\d*/g)[0],this.setMonth()):"month"==i&&(this.month=t.match(/\d*/g)[0],this.setMonth())},cancel:function(){this.show=!1,this.onCancel()}},mounted:function(){this.setMonth()},components:{PickerItem:i("C7Lr")(v,g,!1,null,null,null).exports}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"m-picker"},[i("div",{staticClass:"m-picker-mark"}),t._v(" "),i("div",{staticClass:"m-picker-box"},[i("div",{staticClass:"m-picker-header"},[i("span",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("span",{on:{click:t.sel}},[t._v("确定")])]),t._v(" "),i("div",{staticClass:"m-picker-content"},["datePicker"==t.type?i("div",{staticClass:"m-picker-item-box"},[i("PickerItem",{attrs:{val:t.year,selType:"year",change:t.change,d:t.dataList[0]},on:{"update:val":function(e){t.year=e}}}),t._v(" "),i("PickerItem",{attrs:{val:t.month,selType:"month",change:t.change,d:t.dataList[1]},on:{"update:val":function(e){t.month=e}}}),t._v(" "),i("PickerItem",{attrs:{val:t.day,selType:"day",change:t.change,d:t.dataList[2]},on:{"update:val":function(e){t.day=e}}})],1):i("div",{staticClass:"m-picker-item-box"},t._l(t.dataList,function(e,n){return i("PickerItem",{key:n,attrs:{change:t.change,d:e}})}),1)])])]):t._e()},staticRenderFns:[]},T=i("C7Lr")(y,f,!1,null,null,null).exports,k={};k.install=function(t){new Date;t.prototype.$picker={};var e=new(t.extend(T))({el:document.createElement("div")});document.body.appendChild(e.$el),t.prototype.$picker.show=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new Date;if(e=h()(e,{show:!0,type:"picker",data:[],year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate(),startTime:"",endTime:"",date:"",onOk:function(t){console.log(t),console.log("选中回调")},onCancel:function(){console.log("取消回调")}}),"datePicker"==t.type){var n=[1950,2050];if(t.endTime){var s=new Date(u(t.endTime)).getFullYear();n[1]=s}if(t.startTime){var a=new Date(u(t.startTime)).getFullYear();n[0]=a}if(t.startTime&&t.endTime&&new Date(u(t.startTime)).getTime()>=new Date(u(t.endTime)).getTime()&&(n[0]=1950,t.startTime="1950-01-01"),t.date){var r=new Date(u(t.date)),o=new Date(u(t.endTime)||"2050-01-01").getTime(),l=new Date(u(t.startTime)||"1950-01-01").getTime();r.getTime()>=l&&r.getTime()<=o?(t.year=r.getFullYear(),t.month=r.getMonth()+1,t.day=r.getDate()):t.date=""}for(var m=[1,12],d=[1,31],p=[],v=[],g=[];n[0]<=n[1];n[0]++)p.push(n[0]+"年");for(;m[0]<=m[1];m[0]++)v.push(m[0]+"月");for(;d[0]<=d[1];d[0]++)g.push(d[0]+"日");t.dataList=[p,v,g]}!function(t,e){var i={};for(var n in t.$options.props)"value"!==n&&(i[n]=t.$options.props[n].default);var s=c()({},i,e);for(var a in s)t[a]=s[a]}(e,t)},t.prototype.$picker.hide=function(){e.show=!1}};var _=k;n.a.use(_),n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:a},template:"<App/>"})},amPA:function(t,e){}},["NHnr"]);